# AI 周报润色 - 测试用例

> 版本：v2.4.0
> 测试环境：https://ai-report-production-1b54.up.railway.app/
> 本地环境：http://localhost:3000

---

## 一、用户认证测试

### 1.1 游客访问
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| AUTH-001 | 直接访问 /index.html，不登录 | 可以看到主页面，显示"登录"按钮 |
| AUTH-002 | 游客输入内容并点击润色 | 能够润色成功，显示剩余次数（3次/天） |
| AUTH-003 | 游客连续润色3次 | 第4次提示"游客试用次数已用完，请登录" |
| AUTH-004 | 游客点击 Dev/Ops 角色 | 提示需要升级 Pro |

### 1.2 手机号登录
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| AUTH-005 | 访问 /login.html | 显示手机号输入框和获取验证码按钮 |
| AUTH-006 | 输入手机号 13800138000，点击获取验证码 | 按钮变为倒计时60秒 |
| AUTH-007 | 输入验证码 123456，点击登录 | 登录成功，跳转到主页，显示用户信息 |
| AUTH-008 | 使用新手机号登录 | 自动注册为 Free 用户 |
| AUTH-009 | 输入错误验证码 111111 | 提示"验证码错误或已过期" |

### 1.3 管理员登录
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| AUTH-010 | 访问 /admin.html | 显示管理员登录页面 |
| AUTH-011 | 输入 admin@ai-report.com / admin123 | 登录成功，进入管理后台 |
| AUTH-012 | 输入错误密码 | 提示"密码错误" |

---

## 二、角色选择测试

### 2.1 Free 用户
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| ROLE-001 | Free 用户点击 PM 角色卡片 | 选中状态，可以使用 |
| ROLE-002 | Free 用户点击 Dev 角色卡片 | 显示 PRO 标签，提示升级 |
| ROLE-003 | Free 用户点击 Ops 角色卡片 | 显示 PRO 标签，提示升级 |

### 2.2 Pro 用户
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| ROLE-004 | Pro 用户点击任意角色 | 均可选中使用 |
| ROLE-005 | Pro 用户查看自定义角色区域 | 显示"我的自定义角色"区域 |

---

## 三、润色功能测试

### 3.1 基础润色
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| POLISH-001 | 输入"本周修了3个bug，开了2个会"，选PM角色，点击润色 | 流式输出润色结果，有光标效果 |
| POLISH-002 | 不输入内容直接点击润色 | 提示"请输入周报内容" |
| POLISH-003 | 输入内容，选择 Dev 角色润色（Pro） | 结果包含技术相关表述 |
| POLISH-004 | 输入内容，选择 Ops 角色润色（Pro） | 结果包含运营数据相关表述 |
| POLISH-005 | 润色过程中点击"取消" | 停止生成，显示已生成部分 |

### 3.2 范本学习
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| POLISH-006 | 展开范本区域，输入范本内容，点击保存 | 显示"已保存"，启用"使用范本"开关 |
| POLISH-007 | 勾选"使用我的范本风格"，润色 | 结果风格接近范本 |
| POLISH-008 | 点击"清除"按钮 | 范本被清空，开关禁用 |

### 3.3 快速模板
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| POLISH-009 | 点击"本周成果"模板按钮 | 输入框插入成果模板格式 |
| POLISH-010 | 点击"项目进展"模板按钮 | 输入框插入进展模板格式 |
| POLISH-011 | 点击"问题风险"模板按钮 | 输入框插入问题模板格式 |

### 3.4 语音输入
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| POLISH-012 | 点击语音输入按钮（Chrome浏览器） | 请求麦克风权限，开始录音 |
| POLISH-013 | 说话后停止 | 语音转文字填入输入框 |
| POLISH-014 | Safari 浏览器点击语音按钮 | 提示"当前浏览器不支持语音输入" |

---

## 四、润色结果测试

### 4.1 结果操作
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| RESULT-001 | 润色完成后点击复制按钮 | 复制到剪贴板，提示"已复制" |
| RESULT-002 | 点击导出下拉菜单 | 显示 Markdown/Word/图片 选项 |
| RESULT-003 | 选择"导出 Markdown" | 下载 .md 文件 |
| RESULT-004 | 选择"导出 Word" | 下载 .docx 文件 |
| RESULT-005 | 选择"导出图片" | 下载带水印的 .png 图片 |

### 4.2 满意度评分
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| RESULT-006 | 润色完成后查看评分区域 | 显示5星评分和反馈输入框 |
| RESULT-007 | 点击4星，输入反馈，提交 | 提示"感谢您的反馈" |
| RESULT-008 | 再次评分 | 更新评分成功 |

---

## 五、AI对话修改测试（Pro）

### 5.1 对话入口
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| CHAT-001 | Free 用户润色后点击"AI优化" | 显示升级弹窗 |
| CHAT-002 | Pro 用户润色后点击"AI优化" | 打开对话面板 |

### 5.2 对话功能
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| CHAT-003 | 输入"让技术部分更专业"，发送 | AI 返回修改后的周报 |
| CHAT-004 | 点击快捷标签"更简洁" | 自动发送该指令 |
| CHAT-005 | 点击快捷标签"加数据" | 自动发送该指令 |
| CHAT-006 | 点击"撤销"按钮 | 恢复上一个版本 |
| CHAT-007 | 点击"重做"按钮 | 恢复撤销前的版本 |
| CHAT-008 | 点击"采用这版" | 替换右侧结果，关闭面板 |

---

## 六、自定义角色测试（Pro）

### 6.1 创建角色
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| CUSTOM-001 | Pro 用户点击"新建角色" | 打开创建角色弹窗 |
| CUSTOM-002 | 输入角色名"技术总监"，选择图标，点击创建 | 显示"AI生成中"，创建成功 |
| CUSTOM-003 | 查看自定义角色列表 | 显示新创建的角色卡片 |
| CUSTOM-004 | 连续创建5个自定义角色 | 第6个提示"最多创建5个" |

### 6.2 使用角色
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| CUSTOM-005 | 点击自定义角色卡片 | 选中该角色，其他角色取消选中 |
| CUSTOM-006 | 使用自定义角色润色 | 按该角色策略润色 |

### 6.3 删除角色
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| CUSTOM-007 | 悬停自定义角色，点击删除按钮 | 弹出确认对话框 |
| CUSTOM-008 | 确认删除 | 角色从列表移除 |

---

## 七、历史记录测试

### 7.1 历史列表
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| HISTORY-001 | 登录后访问 /history.html | 显示历史周报列表 |
| HISTORY-002 | 点击某条记录 | 显示原文和润色结果对比 |
| HISTORY-003 | 点击删除按钮 | 确认后删除该记录 |

---

## 八、管理后台测试

### 8.1 数据概览
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| ADMIN-001 | 管理员登录后查看概览 | 显示用户数、周报数、反馈数统计 |
| ADMIN-002 | 查看增强统计 | 显示今日润色数、活跃用户、满意度 |
| ADMIN-003 | 查看使用趋势图表 | 显示近7天折线图 |
| ADMIN-004 | 查看用户分布图表 | 显示 Free/Pro 饼图 |
| ADMIN-005 | 查看角色分布图表 | 显示各角色使用柱状图 |

### 8.2 用户管理
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| ADMIN-006 | 点击"用户管理"标签 | 显示用户列表表格 |
| ADMIN-007 | 点击某用户"详情"按钮 | 弹出用户详情，显示周报历史 |
| ADMIN-008 | 点击"升级Pro"按钮 | 确认后用户升级为 Pro |
| ADMIN-009 | 点击"降级Free"按钮 | 确认后用户降级为 Free |

### 8.3 Prompt 管理
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| ADMIN-010 | 点击"Prompt管理"标签 | 显示 PM/Dev/Ops 三个 Prompt 编辑器 |
| ADMIN-011 | 修改 PM Prompt 内容，点击保存 | 提示"保存成功" |
| ADMIN-012 | 修改内容后点击"保存为新版本" | 创建新版本，版本号+1 |

### 8.4 反馈管理
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| ADMIN-013 | 点击"反馈管理"标签 | 显示反馈列表 |
| ADMIN-014 | 按类型筛选"Bug" | 只显示 Bug 类型反馈 |
| ADMIN-015 | 点击某反馈卡片 | 显示反馈详情，可更新状态 |

---

## 九、新用户引导测试

| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| GUIDE-001 | 清除 localStorage，首次访问主页 | 显示欢迎引导弹窗 |
| GUIDE-002 | 点击"开始使用" | 关闭弹窗，不再显示 |
| GUIDE-003 | 刷新页面 | 不再显示引导弹窗 |
| GUIDE-004 | 点击"跳过引导" | 关闭弹窗，不再显示 |

---

## 十、边界和异常测试

### 10.1 输入边界
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| EDGE-001 | 输入超长内容（>10000字符）润色 | 正常处理或提示长度限制 |
| EDGE-002 | 输入只有空格的内容润色 | 提示"请输入周报内容" |
| EDGE-003 | 输入特殊字符（emoji、HTML标签） | 正常处理，不会 XSS |

### 10.2 网络异常
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| EDGE-004 | 断网后点击润色 | 显示网络错误提示 |
| EDGE-005 | API 超时（模拟慢网络） | 显示超时提示 |

### 10.3 并发操作
| 用例ID | 操作步骤 | 预期结果 |
|--------|---------|----------|
| EDGE-006 | 润色过程中再次点击润色 | 禁用按钮，防止重复提交 |
| EDGE-007 | 打开两个标签页同时操作 | 各自独立工作，数据不冲突 |

---

## 测试账号

| 类型 | 账号 | 密码/验证码 |
|------|------|------------|
| 管理员 | admin@ai-report.com | admin123 |
| 普通用户 | 任意手机号 | 123456 |

## 测试浏览器

- Chrome (推荐)
- Safari
- Firefox
- Edge

---

## Bug 报告格式

请按以下格式报告 Bug：

```
用例ID: POLISH-001
实际结果: [描述实际发生的情况]
错误信息: [如有错误提示，请复制]
截图: [如有必要]
浏览器: Chrome 120
```

将 Bug 报告发送给开发者进行修复。
